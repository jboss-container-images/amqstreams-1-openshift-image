schema_version: 1

name: kafka.base
version: 2.0.0

envs:
  - name: "KAFKA_HOME"
    value: "/opt/kafka"
  - name: "STUNNEL_HOME"
    value: "/opt/stunnel"
  - name: "S2I_HOME"
    value: "/opt/kafka/s2i"
  - name: "KAFKA_EXPORTER_HOME"
    value: "/opt/kafka-exporter"
  - name: "CRUISE_CONTROL_HOME"
    value: "/opt/cruise-control"

artifacts:
  - md5: c4ec88196fa7420c8d9e1fcf4da72b67
    name: strimzi-kafka-scripts.zip
  - md5: 1d536c5671065890a40d2aaec440ea46
    name: cruise-control-ocp.zip

packages:
  manager: microdnf
  content_sets:
    x86_64:
      # Required for kafka_exporter
      - amq-streams-2-for-rhel-8-rpms
      - rhel-8-for-x86_64-baseos-rpms
    ppc64le:
      # Required for kafka_exporter
      - amq-streams-2-for-rhel-8-ppc64le-rpms
      - rhel-8-for-ppc64le-baseos-rpms
  install:
    - unzip
    - tar
    - rsync
    - shadow-utils # groupadd
    - gzip
    - kafka_exporter

execute:
  - script: install.sh
